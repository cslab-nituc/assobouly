\hypertarget{assembler_8h}{}\doxysection{assembler.\+h File Reference}
\label{assembler_8h}\index{assembler.h@{assembler.h}}


アセンブリ言語（簡易）のシミュレータ  


This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=156pt]{assembler_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structCode}{Code}}
\begin{DoxyCompactList}\small\item\em コード型。コマンドとオペランドを持つ。コード\+ID型とほぼ同等だが、実装方法が異なるかもしれないので区別する。 \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structState}{State}}
\begin{DoxyCompactList}\small\item\em 状態を表す型（構造体）。 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{assembler_8h_a8bf026b52dc5ddc914f3913e0642dfd9}\label{assembler_8h_a8bf026b52dc5ddc914f3913e0642dfd9}} 
\#define \mbox{\hyperlink{assembler_8h_a8bf026b52dc5ddc914f3913e0642dfd9}{COMMAND\+\_\+\+BITS}}~4
\begin{DoxyCompactList}\small\item\em コマンドのビット数 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_a4cd12719bc4eb13e5f366a1e0333e4f9}\label{assembler_8h_a4cd12719bc4eb13e5f366a1e0333e4f9}} 
\#define \mbox{\hyperlink{assembler_8h_a4cd12719bc4eb13e5f366a1e0333e4f9}{OPERAND\+\_\+\+BITS}}~4
\begin{DoxyCompactList}\small\item\em オペランドのビット数 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_ab1fa09cff0f24db59dff94e7625bfb28}\label{assembler_8h_ab1fa09cff0f24db59dff94e7625bfb28}} 
\#define \mbox{\hyperlink{assembler_8h_ab1fa09cff0f24db59dff94e7625bfb28}{COMMAND\+\_\+\+MASK}}~0xf
\begin{DoxyCompactList}\small\item\em コマンドのマスク コマンド= (コード\+ID $>$$>$ OPERAND\+\_\+\+BITS) \& COMMAND\+\_\+\+MASK で取り出す。 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_aaf9ac59ac3c23da0685f17d2f03eedf2}\label{assembler_8h_aaf9ac59ac3c23da0685f17d2f03eedf2}} 
\#define \mbox{\hyperlink{assembler_8h_aaf9ac59ac3c23da0685f17d2f03eedf2}{OPERAND\+\_\+\+MASK}}~0xf
\begin{DoxyCompactList}\small\item\em オペランドのマスク オペランド= コード\+ID \& OPERAND\+\_\+\+MASK で取り出す。 \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{assembler_8h_a5ad3f75a4e38fd9bbed917c71ca4e9e0}{MEMORY\+\_\+\+SIZE}}~16
\begin{DoxyCompactList}\small\item\em 状態部分。メモリーの状態、プログラムカウンターの値、レジスターの値から構成される。 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}\label{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}} 
typedef unsigned char \mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}}
\begin{DoxyCompactList}\small\item\em コード\+ID型。 上位ビットがコマンド、下位ビットがオペランド。 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_a0589d0764e95a0af0e4edf7d517b116b}\label{assembler_8h_a0589d0764e95a0af0e4edf7d517b116b}} 
typedef enum \mbox{\hyperlink{assembler_8h_a54d11ed3a6f9986e98f2ae7f7e3d7e8f}{Command\+\_\+tag}} {\bfseries Command}
\item 
\mbox{\Hypertarget{assembler_8h_ab44e562e83c947d24a8a6053988f43a4}\label{assembler_8h_ab44e562e83c947d24a8a6053988f43a4}} 
typedef unsigned char \mbox{\hyperlink{assembler_8h_ab44e562e83c947d24a8a6053988f43a4}{Operand}}
\begin{DoxyCompactList}\small\item\em オペランド型 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_ae01c54212a27f528e27f9ecd78c6b7de}\label{assembler_8h_ae01c54212a27f528e27f9ecd78c6b7de}} 
typedef unsigned char \mbox{\hyperlink{assembler_8h_ae01c54212a27f528e27f9ecd78c6b7de}{Register}}
\begin{DoxyCompactList}\small\item\em レジスターの値を表す型。0～255。 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_a4f8b10685a4134c9dbe4129fc3c281d9}\label{assembler_8h_a4f8b10685a4134c9dbe4129fc3c281d9}} 
typedef unsigned char \mbox{\hyperlink{assembler_8h_a4f8b10685a4134c9dbe4129fc3c281d9}{Pc}}
\begin{DoxyCompactList}\small\item\em プログラムカウンターの値を表す型。実際には0～15。 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_ab5d1a248a15dbf0da1cb192711d4fcf8}\label{assembler_8h_ab5d1a248a15dbf0da1cb192711d4fcf8}} 
typedef \mbox{\hyperlink{structState}{State}} $\ast$ {\bfseries Statep}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{assembler_8h_a54d11ed3a6f9986e98f2ae7f7e3d7e8f}\label{assembler_8h_a54d11ed3a6f9986e98f2ae7f7e3d7e8f}} 
enum \mbox{\hyperlink{assembler_8h_a54d11ed3a6f9986e98f2ae7f7e3d7e8f}{Command\+\_\+tag}} \{ \newline
{\bfseries NOTHING}
, {\bfseries SaveA}
, {\bfseries SaveB}
, {\bfseries LoadA}
, \newline
{\bfseries LoadB}
, {\bfseries AddA}
, {\bfseries AddB}
, {\bfseries Jump}
, \newline
{\bfseries IfA}
, {\bfseries IfB}
, {\bfseries End}
 \}
\begin{DoxyCompactList}\small\item\em コマンド型。 \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}} \mbox{\hyperlink{assembler_8h_a90051c69b8a8d89b421409ceb7b6acfb}{fetch}} (\mbox{\hyperlink{structState}{Statep}} sp)
\begin{DoxyCompactList}\small\item\em 関数 \end{DoxyCompactList}\item 
\mbox{\Hypertarget{assembler_8h_a799eec15b0f2dfa773d0fbab07e7f5bf}\label{assembler_8h_a799eec15b0f2dfa773d0fbab07e7f5bf}} 
\mbox{\hyperlink{structCode}{Code}} \mbox{\hyperlink{assembler_8h_a799eec15b0f2dfa773d0fbab07e7f5bf}{decode}} (\mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}} cid)
\begin{DoxyCompactList}\small\item\em \+: コード\+IDをコード型の構造体に変換する。 \end{DoxyCompactList}\item 
\mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}} \mbox{\hyperlink{assembler_8h_a4bea27b1e6b70cc4ce45d2f1255587b2}{encode}} (Command com, \mbox{\hyperlink{assembler_8h_ab44e562e83c947d24a8a6053988f43a4}{Operand}} op)
\begin{DoxyCompactList}\small\item\em コマンド番号とオペランドをコード\+IDに変換する。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{assembler_8h_a1a397303fae178edb76be0f3e8c82fa2}{exec}} (\mbox{\hyperlink{structState}{Statep}} sp, const \mbox{\hyperlink{structCode}{Code}} $\ast$code)
\begin{DoxyCompactList}\small\item\em コードを実行し、状態を変化させる。 \end{DoxyCompactList}\item 
void \mbox{\hyperlink{assembler_8h_a2b7fcdba8cb894810e5a95453af0d19d}{print\+State}} (\mbox{\hyperlink{structState}{Statep}} sp)
\begin{DoxyCompactList}\small\item\em 状態を標準出力に表示する。 \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
アセンブリ言語（簡易）のシミュレータ 

\begin{DoxyAuthor}{Author}
Makoto TANABE (\href{mailto:tanabe@ube-k.ac.jp}{\texttt{ tanabe@ube-\/k.\+ac.\+jp}}) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
2022-\/07-\/04
\end{DoxyDate}
\begin{DoxyCopyright}{Copyright}
Copyright (c) 2022 
\end{DoxyCopyright}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{assembler_8h_a5ad3f75a4e38fd9bbed917c71ca4e9e0}\label{assembler_8h_a5ad3f75a4e38fd9bbed917c71ca4e9e0}} 
\index{assembler.h@{assembler.h}!MEMORY\_SIZE@{MEMORY\_SIZE}}
\index{MEMORY\_SIZE@{MEMORY\_SIZE}!assembler.h@{assembler.h}}
\doxysubsubsection{\texorpdfstring{MEMORY\_SIZE}{MEMORY\_SIZE}}
{\footnotesize\ttfamily \#define MEMORY\+\_\+\+SIZE~16}



状態部分。メモリーの状態、プログラムカウンターの値、レジスターの値から構成される。 

メモリサイズ 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{assembler_8h_a4bea27b1e6b70cc4ce45d2f1255587b2}\label{assembler_8h_a4bea27b1e6b70cc4ce45d2f1255587b2}} 
\index{assembler.h@{assembler.h}!encode@{encode}}
\index{encode@{encode}!assembler.h@{assembler.h}}
\doxysubsubsection{\texorpdfstring{encode()}{encode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}} encode (\begin{DoxyParamCaption}\item[{Command}]{com,  }\item[{\mbox{\hyperlink{assembler_8h_ab44e562e83c947d24a8a6053988f43a4}{Operand}}}]{op }\end{DoxyParamCaption})}



コマンド番号とオペランドをコード\+IDに変換する。 


\begin{DoxyParams}{Parameters}
{\em com} & コマンド番号 \\
\hline
{\em op} & オペランド \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Code\+Id コード\+ID 
\end{DoxyReturn}
\mbox{\Hypertarget{assembler_8h_a1a397303fae178edb76be0f3e8c82fa2}\label{assembler_8h_a1a397303fae178edb76be0f3e8c82fa2}} 
\index{assembler.h@{assembler.h}!exec@{exec}}
\index{exec@{exec}!assembler.h@{assembler.h}}
\doxysubsubsection{\texorpdfstring{exec()}{exec()}}
{\footnotesize\ttfamily void exec (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structState}{Statep}}}]{sp,  }\item[{const \mbox{\hyperlink{structCode}{Code}} $\ast$}]{code }\end{DoxyParamCaption})}



コードを実行し、状態を変化させる。 


\begin{DoxyParams}{Parameters}
{\em sp} & 状態へのポインタ。実行後はcode実行後の状態に変化する。 \\
\hline
{\em code} & 実行するコード \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{assembler_8h_a90051c69b8a8d89b421409ceb7b6acfb}\label{assembler_8h_a90051c69b8a8d89b421409ceb7b6acfb}} 
\index{assembler.h@{assembler.h}!fetch@{fetch}}
\index{fetch@{fetch}!assembler.h@{assembler.h}}
\doxysubsubsection{\texorpdfstring{fetch()}{fetch()}}
{\footnotesize\ttfamily \mbox{\hyperlink{assembler_8h_a6adc0541fbd725483c8d2867f68fc37e}{Code\+Id}} fetch (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structState}{Statep}}}]{sp }\end{DoxyParamCaption})}



関数 

\+: その状態（の\+PCカウンタが挿す）におけるコードの\+IDを取得する。 \mbox{\Hypertarget{assembler_8h_a2b7fcdba8cb894810e5a95453af0d19d}\label{assembler_8h_a2b7fcdba8cb894810e5a95453af0d19d}} 
\index{assembler.h@{assembler.h}!printState@{printState}}
\index{printState@{printState}!assembler.h@{assembler.h}}
\doxysubsubsection{\texorpdfstring{printState()}{printState()}}
{\footnotesize\ttfamily void print\+State (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structState}{Statep}}}]{sp }\end{DoxyParamCaption})}



状態を標準出力に表示する。 


\begin{DoxyParams}{Parameters}
{\em sp} & \\
\hline
\end{DoxyParams}
